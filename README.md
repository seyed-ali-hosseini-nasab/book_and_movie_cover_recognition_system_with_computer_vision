# 📚 سیستم تشخیص جلد کتاب و فیلم  
**Computer Vision Book Cover Recognition System**

سیستمی هوشمند برای تشخیص و تطبیق جلد کتاب‌ها با استفاده از پردازش تصویر و یادگیری ماشین

---

## 🎯 هدف پروژه  
این پروژه قابلیت‌های زیر را ارائه می‌دهد:  
- **تشخیص تصویر**: مقایسه تصویر ورودی با مجموعه جلد کتاب‌ها و یافتن بهترین تطبیق  
- **پردازش ویدئو**: استخراج فریم‌ها از ویدئوهای تریلر و تشخیص جلد کتاب‌های موجود در آن‌ها  
- **رابط کاربری فارسی**: رابط گرافیکی کاربرپسند با پشتیبانی کامل از زبان فارسی  

---

## 🏗️ معماری پروژه  
پروژه بر اساس **Clean Architecture** و اصول **SOLID** طراحی شده:

src/
├── application/         # لایه کاربرد
│   ├── interfaces/      # رابط‌های کاربرد
│   └── use_cases/       # موارد استفاده
├── domain/              # لایه دامنه
│   └── entities/        # موجودیت‌های اصلی
├── infrastructure/      # لایه زیرساخت
│   ├── feature_extractors/
│   ├── matchers/
│   ├── repositories/
│   └── video_processors/
└── presentation/        # لایه ارائه
    └── gui/             # رابط کاربری گرافیکی



---

## 🛠️ تکنولوژی‌ها و الگوریتم‌ها  

### استخراج ویژگی  
- **SIFT (Scale-Invariant Feature Transform)**: استخراج نقاط کلیدی مقاوم در برابر تغییر مقیاس و چرخش  

### تطبیق ویژگی  
- **FLANN (Fast Library for Approximate Nearest Neighbors)**: جستجوی سریع تطبیق‌ها با استفاده از KD-Tree  

### پیش‌فیلتر سریع  
- **pHash (Perceptual Hash)**: فیلتر اولیه بر اساس شباهت بصری  
- **Histogram Comparison**: تشخیص تغییرات معنادار در فریم‌های ویدئو  

### پردازش ویدئو  
- **Keyframe Extraction**: استخراج فریم‌های کلیدی با فیلتر هیستوگرام HSV  
- **Frame Caching**: ذخیره‌سازی هوشمند فریم‌ها برای بهبود عملکرد  

---

## 📋 پیش‌نیازها  
- Python 3.13  
- pip  

---

## 🚀 نصب و راه‌اندازی  

### 1. کلون کردن پروژه  
git clone https://github.com/seyed-ali-hosseini-nasab/computer_vision_book_cover_recognition_system.git
cd computer_vision_book_cover_recognition_system


### 2. نصب وابستگی‌ها  
pip install -r requirements.txt


### 3. ایجاد ساختار پوشه‌ها  
mkdir -p data/input_images
mkdir -p data/book_movie_images
mkdir -p data/trailers
mkdir -p data/cache/video_frames_cache


### 4. اجرای برنامه  
python main.py


---

## 📦 وابستگی‌ها  
numpy==2.3.1
opencv-contrib-python==4.11
pillow==11.2.1
ttkthemes==3.2.2


---

## 🗂️ ساختار داده‌ها  
data/
├── input_images/ # تصاویر ورودی برای تست
├── book_movie_images/ # مجموعه جلد کتاب‌ها و فیلم‌ها
├── trailers/ # ویدئوهای تریلر (نادیده گرفته شده در git)
└── cache/ # (نادیده گرفته شده در git)
    └── video_frames_cache/ # کش فریم‌ها و متادیتا



---

## 🎮 نحوه استفاده  

### تشخیص تصویر  
1. تصویر ورودی را از پوشه `data/input_images` انتخاب کنید  
2. پوشه جلد کتاب‌ها را مشخص کنید (`data/book_movie_images`)  
3. روی دکمه **"تشخیص تصویر"** کلیک کنید  
4. نتایج را مرتب‌شده بر اساس امتیاز اعتماد مشاهده کنید  

### پردازش ویدئو  
1. ویدئوی تریلر را از پوشه `data/trailers` انتخاب کنید  
2. پارامترهای پردازش را تنظیم کنید:  
   - **Frame Skip** (1–120): فاصله بین فریم‌های پردازش شده  
   - **pHash Thresh** (1–64): آستانه فیلتر شباهت اولیه  
   - **Hist Thresh** (0.0–1.0): آستانه تشخیص تغییر در فریم‌ها  
3. روی دکمه **"تشخیص ویدئو"** کلیک کنید  
4. فریم‌های منطبق را همراه با جلد کتاب‌های تشخیص‌داده‌شده ببینید  

---

## ⚙️ تنظیمات پیشرفته  

### بهینه‌سازی عملکرد  
- **Frame Skip**: افزایش برای سرعت بیشتر، کاهش برای دقت بالاتر  
- **pHash Threshold**: کاهش برای فیلتر سخت‌گیرانه‌تر  
- **Histogram Threshold**: کاهش برای انتخاب فریم‌های بیشتر  

### مدیریت کش  
- **پاک کردن کش**: حذف فریم‌ها و متادیتای ذخیره‌شده  
- **کش خودکار**: فریم‌های پردازش‌شده به‌صورت خودکار ذخیره می‌شوند  

---

## 🔧 الگوریتم کلی عملکرد  

### تشخیص تصویر  
تصویر ورودی → استخراج SIFT → تطبیق FLANN → امتیازدهی → مرتب‌سازی


### پردازش ویدئو  
ویدئو → استخراج کلیدفریم → (کش؟) → pHash فیلتر → SIFT+FLANN → ذخیره نتیجه


---

## 📊 نمونه نتایج  
- **سرعت پردازش**: بهبود تا 10× با استفاده از کش و فیلترهای پیش‌پردازش  
- **دقت تشخیص**: تطبیق دقیق بر اساس ویژگی‌های SIFT مقاوم  
- **پشتیبانی فرمت**: JPG, PNG, MP4, AVI, MOV  

---

## 🤝 مشارکت  
برای مشارکت در پروژه:  
1. Fork کنید  
2. شاخه جدید ایجاد کنید (`git checkout -b feature/AmazingFeature`)  
3. تغییرات را commit کنید (`git commit -m 'Add some AmazingFeature'`)  
4. Push کنید (`git push origin feature/AmazingFeature`)  
5. Pull Request ایجاد کنید  

---

## 📝 تاریخچه تغییرات  

### v1.0.0  
- ✅ پیاده‌سازی تشخیص تصویر با SIFT+FLANN  
- ✅ رابط کاربری فارسی با tkinter  
- ✅ پردازش ویدئو با استخراج فریم  
- ✅ سیستم کش هوشمند  
- ✅ فیلترهای پیش‌پردازش (pHash, Histogram)  

---

## 🛡️ مجوز  
این پروژه تحت مجوز MIT منتشر شده است. جزئیات در فایل [LICENSE](LICENSE) موجود است.  

---

## 👥 سازندگان  
- **سید علی حسینی نسب** – توسعه‌دهنده اصلی  
- پروژه درس بینایی کامپیوتر – دانشگاه فردوسی مشهد  

---

<div align="center">
  <p>ساخته شده با ❤️ برای درس بینایی کامپیوتر</p>
  <p>دانشگاه فردوسی مشهد – دانشکده مهندسی</p>
</div>
